import{_ as k,j as g,r as b,o as h,c as _,f as u,A as v,d as e,w as S,e as i,H as w,F as y,D as N,v as c,g as T,b as C,S as $,E as D,h as V,G as U,y as I,z as B}from"./index-c1f85e6e.js";import{S as L}from"./Sidebar-User-70b86ce2.js";import{N as q}from"./Navbar-37058070.js";import{C as K}from"./ChatMe-c8b1bf56.js";const r=a=>(I("data-v-dce77e23"),a=a(),B(),a),M={id:"wrapper"},O={id:"content-wrapper",class:"d-flex flex-column"},j={id:"content"},A=r(()=>e("h1",{class:"h3 mb-0 text-gray-800 text-center mt-4"},"Halaman Input Note",-1)),J={class:"headerNote"},F={class:"row"},z=r(()=>e("div",{class:"col-1"},null,-1)),E={class:"col-10"},H={class:"row mb-3"},x=r(()=>e("label",{for:"nama",class:"form-label"},"Keteragan",-1)),P=r(()=>e("option",{disabled:""},"Pilih Keterangan",-1)),W=["value"],Y={class:"row"},G={class:"col-sm-6"},Q={class:"mb-3"},R=r(()=>e("label",{for:"location",class:"form-label"},"Lokasi",-1)),X={class:"col-sm-6"},Z={class:"mb-3"},ee=r(()=>e("label",{for:"truck",class:"form-label"},"Nomor Truk",-1)),te={class:"row"},oe={class:"col-sm-6"},se={class:"mb-3"},ae=r(()=>e("label",{for:"location",class:"form-label"},"Tanggal",-1)),ne=["max","min"],re={class:"col-sm-6"},le={class:"mb-3"},ie=r(()=>e("label",{for:"driver",class:"form-label"},"Supir",-1)),de={class:"row"},ce={class:"col-sm-6"},me={class:"mb-3"},ue=r(()=>e("label",{for:"container",class:"form-label"},"Nomor Kontainer",-1)),pe={class:"col-sm-6"},he={class:"mb-3"},_e=r(()=>e("label",{for:"telp",class:"form-label"},"No Telp",-1)),fe={class:"row"},ge={class:"col-sm-6"},ke={class:"mb-3"},be=r(()=>e("label",{for:"seal",class:"form-label"},"Nomor Seal",-1)),ve={class:"col-sm-6"},Se={class:"mb-3"},we=r(()=>e("label",{for:"destination",class:"form-label"},"Tujuan",-1)),ye={class:"row"},Ne={class:"col-6"},Te=r(()=>e("div",{class:"col-6"},[e("button",{type:"submit",class:"btn blueButton",style:{float:"right"}}," Selanjutnya ")],-1)),Ce=r(()=>e("div",{class:"col-1"},null,-1)),$e={data(){return{form:{location:"",id_keterangan:"",keterangan:"",date:"",no_container:"",no_seal:"",destination:"",no_truck:"",driver:"",telp:"",user_id:""},now:{},role:null,keterangan:[],pump:{},kL:null}},mounted(){this.getCurrentDateTime()},methods:{async dataKeterangan(){try{const a=await C.get("https://10.11.10.243/backend/public/api/keterangan");this.keterangan=a.data.data,console.log("test: ",this.keterangan)}catch(a){console.error(a)}},getCurrentDateTime(){const a=new Date,n=String(a.getDate()).padStart(2,"0"),d=String(a.getMonth()+1).padStart(2,"0"),m=a.getFullYear(),t=String(a.getHours()).padStart(2,"0"),o=String(a.getMinutes()).padStart(2,"0"),l=String(a.getSeconds()).padStart(2,"0");this.now={date:`${m}-${d}-${n}`,time:`${t}:${o}:${l}`},this.form.date=this.now.date},handleSubmit(){console.log("kL: ",this.kL),console.log("pump: ",this.pump.id_keterangan),console.log("form: ",this.form.id_keterangan);for(let n=0;n<this.keterangan.length;n++)this.form.id_keterangan==this.keterangan[n].id&&(this.form.keterangan=this.keterangan[n].keterangan);const a=JSON.stringify(this.form);a||this.showAlert(),localStorage.setItem("note",a),console.log("test data: ",this.form),this.$router.push({name:"user-input-tumpukan"})},showAlert(){this.$swal("Data yang anda inputkan kosong !!").then(()=>{this.$router.push("/user-note")})},confirmDelete(){$.fire({title:"Anda yakin merubah keterangan?",text:`Semua data tumpukan ${this.kL} akan terhapus!!`,icon:"warning",showCancelButton:!0,cancelButtonColor:"#3085d6",confirmButtonColor:"#d33",cancelButtonText:"Batal",confirmButtonText:"Yakin"}).then(a=>{a.isConfirmed&&(localStorage.removeItem("tumpukans"),this.handleSubmit())})}},created(){const a=new Date().toUTCString();console.log("Waktu Sekarang (UTC):",a);const n=sessionStorage.getItem("token");if(n)try{const[d,m]=n.split("."),t=JSON.parse(atob(d)),o=atob(m),l=JSON.parse(atob(n.split(".")[1])),s=l.exp,f=new Date(s*1e3);console.log("Waktu Kedaluwarsa (UTC):",f.toUTCString()),new Date>f?(console.log("Keluar"),sessionStorage.removeItem("token"),this.$router.push("/")):console.log("Aman"),this.role=l.role,this.form.user_id=l.id,this.form.location=l.namaLokasi,this.role!=="user"?this.$router.push("/unauthorized"):(!t||!o)&&this.$router.push("/"),this.dataKeterangan();const p=localStorage.getItem("note");p&&(this.pump=JSON.parse(p),this.form=JSON.parse(p),this.kL=this.form.keterangan,this.form.user_id=l.id,console.log("pump: ",this.pump))}catch(d){console.error("Error decoding token:",d),this.$router.push("/")}else this.$router.push("/")}},De=Object.assign($e,{__name:"InputNoteView",setup(a){const n=g(!1),d=g(""),m=()=>{n.value=!n.value,d.value=n.value?"toggle-sidebar":""};return(t,o)=>{const l=b("router-link");return h(),_("div",M,[u(L,{class:v(d.value)},null,8,["class"]),e("div",O,[e("div",j,[u(q,{onToggleSidebar:m}),u(K),A,e("form",{onSubmit:o[9]||(o[9]=S(s=>t.kL==null?t.handleSubmit():t.pump.id_keterangan!=t.form.id_keterangan?t.confirmDelete():t.handleSubmit(),["prevent"])),enctype:"multipart/form-data"},[e("div",J,[e("div",F,[z,e("div",E,[e("div",H,[x,i(e("select",{"onUpdate:modelValue":o[0]||(o[0]=s=>t.form.id_keterangan=s),class:"form-select","aria-label":"Default select example",required:""},[P,(h(!0),_(y,null,N(t.keterangan,s=>(h(),_("option",{key:s.id,value:s.id},D(s.keterangan),9,W))),128))],512),[[w,t.form.id_keterangan]])]),e("div",Y,[e("div",G,[e("div",Q,[R,i(e("input",{type:"text",class:"form-control",id:"location","onUpdate:modelValue":o[1]||(o[1]=s=>t.form.location=s),required:"",disabled:!0},null,512),[[c,t.form.location]])])]),e("div",X,[e("div",Z,[ee,i(e("input",{type:"text",class:"form-control",id:"no_truck",placeholder:"nomor truk","onUpdate:modelValue":o[2]||(o[2]=s=>t.form.no_truck=s),required:""},null,512),[[c,t.form.no_truck]])])])]),e("div",te,[e("div",oe,[e("div",se,[ae,i(e("input",{type:"date",class:"form-control",id:"date","onUpdate:modelValue":o[3]||(o[3]=s=>t.form.date=s),max:t.now.date,min:t.now.date},null,8,ne),[[c,t.form.date]])])]),e("div",re,[e("div",le,[ie,i(e("input",{type:"text",class:"form-control",id:"driver",placeholder:"nama supir","onUpdate:modelValue":o[4]||(o[4]=s=>t.form.driver=s),required:""},null,512),[[c,t.form.driver]])])])]),e("div",de,[e("div",ce,[e("div",me,[ue,i(e("input",{type:"text",class:"form-control",id:"no_container",placeholder:"nomor kontainer","onUpdate:modelValue":o[5]||(o[5]=s=>t.form.no_container=s),required:""},null,512),[[c,t.form.no_container]])])]),e("div",pe,[e("div",he,[_e,i(e("input",{type:"text",class:"form-control",id:"telp",placeholder:"nomor telepon","onUpdate:modelValue":o[6]||(o[6]=s=>t.form.telp=s),required:""},null,512),[[c,t.form.telp]])])])]),e("div",fe,[e("div",ge,[e("div",ke,[be,i(e("input",{type:"text",class:"form-control",id:"no_seal",placeholder:"nomor seal","onUpdate:modelValue":o[7]||(o[7]=s=>t.form.no_seal=s),required:""},null,512),[[c,t.form.no_seal]])])]),e("div",ve,[e("div",Se,[we,i(e("input",{type:"text",class:"form-control",id:"destination",placeholder:"tujuan","onUpdate:modelValue":o[8]||(o[8]=s=>t.form.destination=s),required:""},null,512),[[c,t.form.destination]])])])]),e("div",ye,[e("div",Ne,[u(l,{to:"/user-note",class:"btn btn-danger mb-5"},{default:T(()=>[V("Kembali")]),_:1})]),Te])]),Ce])])],32)]),u(U)])])}}}),Le=k(De,[["__scopeId","data-v-dce77e23"]]);export{Le as default};
