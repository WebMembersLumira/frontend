import{_,k as u,o as f,c as b,d as e,g as r,B as g,C as k,w as v,e as p,v as m,F as y,b as L,H as w,z as S,A as x}from"./index-4fd86721.js";import{N as C}from"./Navbar-9bb9397c.js";import{C as j}from"./ChatMe-676e7c38.js";const l=t=>(S("data-v-379697f6"),t=t(),x(),t),B={id:"wrapper"},D={id:"content-wrapper",class:"d-flex flex-column"},I={id:"content"},T=l(()=>e("h1",{class:"h3 mb-0 text-gray-800 text-center mt-4"},"Layanan",-1)),N=l(()=>e("div",{class:"container"},[e("button",{class:"btn btn-warning mb-3 mt-5","data-toggle":"modal","data-target":"#updateLayanan"}," Update Layanan "),e("div",{class:"d-flex justify-content-center"},[e("iframe",{src:"https://screenleap.com/523071095",width:"100%",height:"500px",frameborder:"0",allowfullscreen:""})])],-1)),U={class:"modal fade",id:"updateLayanan",tabindex:"-1",role:"dialog","aria-labelledby":"updateLayananLabel","aria-hidden":"true",ref:"updateLayananRef"},A={class:"modal-dialog",role:"document"},z={class:"modal-content"},F=l(()=>e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"addInvoiceModalLabel"},"Update Layanan"),e("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[e("span",{"aria-hidden":"true"},"Ã—")])],-1)),M={class:"modal-body"},V={class:"form-group"},J=l(()=>e("label",{for:"link"},"Judul",-1)),O={class:"form-group"},E=l(()=>e("label",{for:"link"},"Link",-1)),K=l(()=>e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"}," Close "),e("button",{type:"submit",class:"btn btn-primary"},"Simpan")],-1)),H={data(){return{user_id:null,role:null,ready:null,link:null,formLink:{judul:"",link:""}}},methods:{setLink(){const t=new FormData;t.append("judul",this.formLink.judul),t.append("link",this.formLink.link),L.post("https://backend-webmember.lumirainternational.com/api/auth/set-link",t,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+sessionStorage.getItem("token")}}).then(a=>{console.log(a.data),this.showAlert()}).catch(a=>{console.error(a)})},showAlert(){this.$swal("Data Berhasil Dikirm!!").then(()=>{$("#updateLayanan").modal("hide")})}},created(){const t=sessionStorage.getItem("token");if(t)try{const[a,i]=t.split("."),d=JSON.parse(atob(a)),s=atob(i),o=JSON.parse(atob(t.split(".")[1])),n=o.exp,c=new Date(n*1e3);console.log("Waktu Kedaluwarsa (UTC):",c.toUTCString()),new Date>c?(console.log("Keluar"),sessionStorage.removeItem("token"),this.$router.push("/")):console.log("Aman");const h=o.level;this.user_id=o.id,console.log("ini idddd:",this.user_id),h!=="1"?this.$router.push("/unauthorized"):(!d||!s)&&this.$router.push("/")}catch(a){console.error("Error decoding token:",a),this.$router.push("/")}else this.$router.push("/")}},P=Object.assign(H,{__name:"Layanan",setup(t){const a=u(!1),i=u(""),d=()=>{a.value=!a.value,i.value=a.value?"toggle-sidebar":""};return(s,o)=>(f(),b(y,null,[e("div",B,[r(k,{class:g(i.value)},null,8,["class"]),e("div",D,[e("div",I,[r(C,{onToggleSidebar:d}),r(j),T,N]),r(w)])]),e("div",U,[e("div",A,[e("div",z,[F,e("div",M,[e("form",{onSubmit:o[2]||(o[2]=v(n=>s.setLink(),["prevent"]))},[e("div",V,[J,p(e("input",{type:"text",class:"form-control",id:"judul","onUpdate:modelValue":o[0]||(o[0]=n=>s.formLink.judul=n)},null,512),[[m,s.formLink.judul]])]),e("div",O,[E,p(e("input",{type:"text",class:"form-control",id:"link","onUpdate:modelValue":o[1]||(o[1]=n=>s.formLink.link=n)},null,512),[[m,s.formLink.link]])]),K],32)])])])],512)],64))}}),G=_(P,[["__scopeId","data-v-379697f6"]]);export{G as default};
