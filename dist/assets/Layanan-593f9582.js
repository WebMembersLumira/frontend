import{_ as v,j as b,o as u,c as p,d as e,f as d,A as y,B as L,t as k,w as _,e as l,v as c,F as w,a as R,b as h,N as S,G as C,y as j,z as I}from"./index-8015cff4.js";import{C as A}from"./ChatMe-7f0a306f.js";const i=t=>(j("data-v-750c0b85"),t=t(),I(),t),B={id:"wrapper"},D={id:"content-wrapper",class:"d-flex flex-column"},x={id:"content"},N=i(()=>e("h1",{class:"h3 mb-0 text-gray-800 text-center mt-4"},"Layanan",-1)),T={class:"container"},U=R('<div class="row" data-v-750c0b85><div class="col-sm-6" data-v-750c0b85><button class="btn btn-warning mb-3 mt-5" data-toggle="modal" data-target="#updateLayanan" data-v-750c0b85> Atur Layanan </button></div><div class="col-sm-6" data-v-750c0b85><button class="btn btn-primary mb-3 mt-5 float-end" data-toggle="modal" data-target="#updateRekening" data-v-750c0b85> Atur Rekening </button></div></div>',1),V={class:"d-flex justify-content-center"},z=["src"],F={key:1},M={class:"modal fade",id:"updateLayanan",tabindex:"-1",role:"dialog","aria-labelledby":"updateLayananLabel","aria-hidden":"true",ref:"updateLayananRef"},P={class:"modal-dialog",role:"document"},J={class:"modal-content"},K=i(()=>e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"addInvoiceModalLabel"},"Update Layanan"),e("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[e("span",{"aria-hidden":"true"},"×")])],-1)),O={class:"modal-body"},E={class:"form-group"},q=i(()=>e("label",{for:"link"},"Judul",-1)),G={class:"form-group"},H=i(()=>e("label",{for:"link"},"Link",-1)),W=i(()=>e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"}," Close "),e("button",{type:"submit",class:"btn btn-primary"},"Simpan")],-1)),Q={class:"modal fade",id:"updateRekening",tabindex:"-1",role:"dialog","aria-labelledby":"updateRekeningLabel","aria-hidden":"true",ref:"updateRekeningRef"},X={class:"modal-dialog",role:"document"},Y={class:"modal-content"},Z=i(()=>e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"addInvoiceModalLabel"},"Update Rekening"),e("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[e("span",{"aria-hidden":"true"},"×")])],-1)),ee={class:"modal-body"},te={class:"form-group"},ae=i(()=>e("label",{for:"rekPenerima"},"Rekening Penerima",-1)),oe={class:"form-group"},ne=i(()=>e("label",{for:"harga"},"Ketetapan Harga",-1)),se=i(()=>e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"}," Close "),e("button",{type:"submit",class:"btn btn-primary"},"Simpan")],-1)),ie={data(){return{user_id:null,role:null,ready:!1,link:null,formLink:{judul:"",link:""},formRekening:{rekening_penerima:"",harga:""}}},methods:{setLink(){const t=new FormData;t.append("judul",this.formLink.judul),t.append("link",this.formLink.link),h.post("https://backend-webmember.lumirainternational.com/api/auth/set-link",t,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+sessionStorage.getItem("token")}}).then(o=>{console.log(o.data),this.formLink.judul="",this.formLink.link="",this.showAlert(),this.ready=!1,this.getLink()}).catch(o=>{console.error(o)})},setRekening(){const t=new FormData;t.append("rekening_tujuan",this.formRekening.rekening_penerima),t.append("harga",this.formRekening.harga),h.post("https://backend-webmember.lumirainternational.com/api/auth/set-rekening",t,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+sessionStorage.getItem("token")}}).then(o=>{console.log(o.data),this.formRekening.rekening_penerima="",this.formRekening.harga="",this.showAlert()}).catch(o=>{console.error(o)})},async getLink(){try{const t=await h.get("https://backend-webmember.lumirainternational.com/api/auth/get-link",{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}});console.log("link: ",t.data.data[0].link),this.link=t.data.data[0].link,this.ready=!0}catch(t){console.error(t)}},showAlert(){this.$swal({title:"Request Success",text:"Data Berhasil Dikirim!",icon:"success"}).then(()=>{$("#updateLayanan").modal("hide"),$("#updateRekening").modal("hide")})}},created(){const t=sessionStorage.getItem("token");if(t)try{const[o,r]=t.split("."),m=JSON.parse(atob(o)),n=atob(r),a=JSON.parse(atob(t.split(".")[1])),s=a.exp,g=new Date(s*1e3);console.log("Waktu Kedaluwarsa (UTC):",g.toUTCString()),new Date>g?(console.log("Keluar"),sessionStorage.removeItem("token"),this.$router.push("/")):console.log("Aman");const f=a.level;this.user_id=a.id,console.log("ini idddd:",this.user_id),f!=="1"?this.$router.push("/unauthorized"):(!m||!n)&&this.$router.push("/"),this.getLink()}catch(o){console.error("Error decoding token:",o),this.$router.push("/")}else this.$router.push("/")}},re=Object.assign(ie,{__name:"Layanan",setup(t){const o=b(!1),r=b(""),m=()=>{o.value=!o.value,r.value=o.value?"toggle-sidebar":""};return(n,a)=>(u(),p(w,null,[e("div",B,[d(L,{class:y(r.value)},null,8,["class"]),e("div",D,[e("div",x,[d(S,{onToggleSidebar:m}),d(A),N,e("div",T,[U,e("div",V,[n.ready?(u(),p("iframe",{key:0,src:n.link,width:"100%",height:"500px",frameborder:"0",allowfullscreen:""},null,8,z)):k("",!0),n.ready?k("",!0):(u(),p("p",F,"Loading..."))])])]),d(C)])]),e("div",M,[e("div",P,[e("div",J,[K,e("div",O,[e("form",{onSubmit:a[2]||(a[2]=_(s=>n.setLink(),["prevent"]))},[e("div",E,[q,l(e("input",{type:"text",class:"form-control",id:"judul","onUpdate:modelValue":a[0]||(a[0]=s=>n.formLink.judul=s)},null,512),[[c,n.formLink.judul]])]),e("div",G,[H,l(e("input",{type:"text",class:"form-control",id:"link","onUpdate:modelValue":a[1]||(a[1]=s=>n.formLink.link=s)},null,512),[[c,n.formLink.link]])]),W],32)])])])],512),e("div",Q,[e("div",X,[e("div",Y,[Z,e("div",ee,[e("form",{onSubmit:a[5]||(a[5]=_(s=>n.setRekening(),["prevent"]))},[e("div",te,[ae,l(e("input",{type:"text",class:"form-control",id:"rekPenerima","onUpdate:modelValue":a[3]||(a[3]=s=>n.formRekening.rekening_penerima=s)},null,512),[[c,n.formRekening.rekening_penerima]])]),e("div",oe,[ne,l(e("input",{type:"text",class:"form-control",id:"harga","onUpdate:modelValue":a[4]||(a[4]=s=>n.formRekening.harga=s)},null,512),[[c,n.formRekening.harga]])]),se],32)])])])],512)],64))}}),ce=v(re,[["__scopeId","data-v-750c0b85"]]);export{ce as default};
