import{_ as v,j as y,o as l,c as r,d as a,f as h,A as w,B as S,t as b,w as _,e as g,v as c,F as L,D as R,b as d,N as C,G as j,E as f,y as A,z as D}from"./index-d4f638b3.js";import{C as B}from"./ChatMe-ce29fbf2.js";const i=e=>(A("data-v-3c653517"),e=e(),D(),e),I={id:"wrapper"},T={id:"content-wrapper",class:"d-flex flex-column"},z={id:"content"},U=i(()=>a("h1",{class:"h3 mb-0 text-gray-800 text-center mt-4"},"Layanan",-1)),N={class:"container"},V={class:"row"},x={class:"col-sm-6"},F=i(()=>a("button",{class:"btn btn-warning mb-3 mt-5","data-toggle":"modal","data-target":"#updateLayanan"}," Atur Layanan ",-1)),J=i(()=>a("button",{class:"btn btn-primary mb-3 mt-5 ms-3","data-toggle":"modal","data-target":"#updateRekening"}," Atur Rekening ",-1)),M=i(()=>a("div",{class:"col-sm-6"},null,-1)),E={class:"d-flex justify-content-center"},K=["data"],P=i(()=>a("p",null,"Browser tidak mendukung.",-1)),O=[P],H={key:0},q={class:"modal fade",id:"updateLayanan",tabindex:"-1",role:"dialog","aria-labelledby":"updateLayananLabel","aria-hidden":"true",ref:"updateLayananRef"},G={class:"modal-dialog",role:"document"},W={class:"modal-content"},Q=i(()=>a("div",{class:"modal-header"},[a("h5",{class:"modal-title",id:"addInvoiceModalLabel"},"Update Layanan"),a("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[a("span",{"aria-hidden":"true"},"×")])],-1)),X={class:"modal-body"},Y={class:"form-group"},Z=i(()=>a("label",{for:"link"},"Judul",-1)),aa={class:"form-group"},ea=i(()=>a("label",{for:"link"},"Link",-1)),ta=i(()=>a("div",{class:"modal-footer"},[a("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"}," Close "),a("button",{type:"submit",class:"btn btn-primary"},"Simpan")],-1)),na={class:"modal fade",id:"updateRekening",tabindex:"-1",role:"dialog","aria-labelledby":"updateRekeningLabel","aria-hidden":"true",ref:"updateRekeningRef"},oa={class:"modal-dialog",role:"document"},sa={class:"modal-content"},ia=i(()=>a("div",{class:"modal-header"},[a("h5",{class:"modal-title",id:"addInvoiceModalLabel"},"Update Rekening"),a("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[a("span",{"aria-hidden":"true"},"×")])],-1)),la={class:"modal-body"},ra={class:"form-group"},da=i(()=>a("label",{for:"rekPenerima"},"Rekening Penerima",-1)),ga=i(()=>a("div",{class:"modal-footer"},[a("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"}," Close "),a("button",{type:"submit",class:"btn btn-primary"},"Simpan")],-1)),ca={class:"modal fade",id:"aturLangganan",tabindex:"-1",role:"dialog","aria-labelledby":"aturLanggananLabel","aria-hidden":"true",ref:"aturLanggananRef"},ma={class:"modal-dialog",role:"document"},ua={class:"modal-content"},ha=i(()=>a("div",{class:"modal-header"},[a("h5",{class:"modal-title",id:"aturLangganan"},"Atur Langganan"),a("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[a("span",{"aria-hidden":"true"},"×")])],-1)),pa={class:"modal-body"},ba={key:0,class:"table table-striped m-auto"},_a=i(()=>a("thead",null,[a("tr",null,[a("th",{scope:"col"},"No"),a("th",{scope:"col"},"Jenis Langganan"),a("th",{scope:"col"},"Harga"),a("th",{scope:"col"},"Aksi")])],-1)),fa={scope:"row"},ka=["onClick"],ya=i(()=>a("i",{class:"bi bi-trash-fill"},null,-1)),La=[ya],va={key:1},wa=i(()=>a("h5",{class:"mt-5 mb-2 text-center fw-bold"},"Tambah Jenis Langganan",-1)),Sa={class:"form-group"},Ra=i(()=>a("label",{for:"jenisLangganan"},"Jenis Langganan",-1)),Ca={class:"form-group"},ja=i(()=>a("label",{for:"harga"},"Harga",-1)),Aa=i(()=>a("div",{class:"modal-footer"},[a("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"}," Close "),a("button",{type:"submit",class:"btn btn-primary"},"Simpan")],-1));document.addEventListener("contextmenu",function(e){e.preventDefault()});document.onkeydown=function(e){if(e.keyCode==123)return!1;if(e.ctrlKey&&e.shiftKey&&e.keyCode==73)return!1};const Da={data(){return{user_id:null,role:null,ready:!1,link:null,formLink:{judul:"",link:""},formRekening:{rekening_penerima:""},formLangganan:{jenis_langganan:"",harga:""},listLangganan:[],langgananReady:!1}},methods:{setLink(){const e=new FormData;e.append("judul",this.formLink.judul),e.append("link",this.formLink.link),d.post("https://backend-webmember.lumirainternational.com/api/auth/set-link",e,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+sessionStorage.getItem("token")}}).then(o=>{console.log(o.data),this.formLink.judul="",this.formLink.link="",this.showAlert(),this.ready=!1,this.getLink()}).catch(o=>{console.error(o)})},setRekening(){const e=new FormData;e.append("rekening_tujuan",this.formRekening.rekening_penerima),d.post("https://backend-webmember.lumirainternational.com/api/auth/set-rekening",e,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+sessionStorage.getItem("token")}}).then(o=>{console.log(o.data),this.formRekening.rekening_penerima="",this.showAlert()}).catch(o=>{console.error(o)})},async getLink(){try{const e=await d.get("https://backend-webmember.lumirainternational.com/api/auth/get-link",{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}});console.log("link: ",e.data.data[0].link),this.link=e.data.data[0].link,this.ready=!0}catch(e){console.error(e)}},setLangganan(){const e=new FormData;e.append("jenis_langganan",this.formLangganan.jenis_langganan),e.append("harga",this.formLangganan.harga),d.post("https://backend-webmember.lumirainternational.com/api/auth/set-langganan",e,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+sessionStorage.getItem("token")}}).then(o=>{this.formLangganan.jenis_langganan="",this.formLangganan.harga="",this.showAlert()}).catch(o=>{console.error(o)})},deleteLangganan(e){d.delete(`https://backend-webmember.lumirainternational.com/api/auth/delete-langganan/${e}`,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+sessionStorage.getItem("token")}}).then(o=>{this.langgananReady=!1,this.getLangganan()}).catch(o=>{console.error(o)})},async getLangganan(){try{const e=await d.get("https://backend-webmember.lumirainternational.com/api/auth/list-langganan",{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}});this.listLangganan=e.data.data,this.langgananReady=!0}catch(e){console.error(e)}},showAlert(){this.$swal({title:"Request Success",text:"Data Berhasil Dikirim!",icon:"success"}).then(()=>{$("#updateLayanan").modal("hide"),$("#updateRekening").modal("hide"),$("#aturLangganan").modal("hide")})}},created(){const e=sessionStorage.getItem("token");if(e)try{const[o,m]=e.split("."),p=JSON.parse(atob(o)),t=atob(m),n=JSON.parse(atob(e.split(".")[1])),s=n.exp,u=new Date(s*1e3);console.log("Waktu Kedaluwarsa (UTC):",u.toUTCString()),new Date>u?(console.log("Keluar"),sessionStorage.removeItem("token"),this.$router.push("/")):console.log("Aman");const k=n.level;this.user_id=n.id,console.log("ini idddd:",this.user_id),k!=="1"?this.$router.push("/unauthorized"):(!p||!t)&&this.$router.push("/"),this.getLink()}catch(o){console.error("Error decoding token:",o),this.$router.push("/")}else this.$router.push("/")}},$a=Object.assign(Da,{__name:"Layanan",setup(e){const o=y(!1),m=y(""),p=()=>{o.value=!o.value,m.value=o.value?"toggle-sidebar":""};return(t,n)=>(l(),r(L,null,[a("div",I,[h(S,{class:w(m.value)},null,8,["class"]),a("div",T,[a("div",z,[h(C,{onToggleSidebar:p}),h(B),U,a("div",N,[a("div",V,[a("div",x,[F,J,a("button",{class:"btn btn-primary mb-3 mt-5 ms-3","data-toggle":"modal","data-target":"#aturLangganan",onClick:n[0]||(n[0]=s=>t.getLangganan())}," Atur Langganan ")]),M]),a("div",E,[a("object",{data:t.link,type:"text/html",width:"100%",height:"500px"},O,8,K),t.ready?b("",!0):(l(),r("p",H,"Loading..."))])])]),h(j)])]),a("div",q,[a("div",G,[a("div",W,[Q,a("div",X,[a("form",{onSubmit:n[3]||(n[3]=_(s=>t.setLink(),["prevent"]))},[a("div",Y,[Z,g(a("input",{type:"text",class:"form-control",id:"judul","onUpdate:modelValue":n[1]||(n[1]=s=>t.formLink.judul=s)},null,512),[[c,t.formLink.judul]])]),a("div",aa,[ea,g(a("input",{type:"text",class:"form-control",id:"link","onUpdate:modelValue":n[2]||(n[2]=s=>t.formLink.link=s)},null,512),[[c,t.formLink.link]])]),ta],32)])])])],512),a("div",na,[a("div",oa,[a("div",sa,[ia,a("div",la,[a("form",{onSubmit:n[5]||(n[5]=_(s=>t.setRekening(),["prevent"]))},[a("div",ra,[da,g(a("input",{type:"text",class:"form-control",id:"rekPenerima","onUpdate:modelValue":n[4]||(n[4]=s=>t.formRekening.rekening_penerima=s)},null,512),[[c,t.formRekening.rekening_penerima]])]),ga],32)])])])],512),a("div",ca,[a("div",ma,[a("div",ua,[ha,a("div",pa,[t.langgananReady?(l(),r("table",ba,[_a,a("tbody",null,[(l(!0),r(L,null,R(t.listLangganan,(s,u)=>(l(),r("tr",{key:s.id},[a("th",fa,f(u+1),1),a("td",null,f(s.jenis_langganan),1),a("td",null,f(s.harga),1),a("td",null,[a("button",{class:"btn btn-danger",onClick:k=>t.deleteLangganan(s.id)},La,8,ka)])]))),128))])])):b("",!0),t.langgananReady?b("",!0):(l(),r("p",va,"Loading...")),wa,a("form",{onSubmit:n[8]||(n[8]=_(s=>t.setLangganan(),["prevent"]))},[a("div",Sa,[Ra,g(a("input",{type:"text",class:"form-control",id:"jenisLangganan","onUpdate:modelValue":n[6]||(n[6]=s=>t.formLangganan.jenis_langganan=s)},null,512),[[c,t.formLangganan.jenis_langganan]])]),a("div",Ca,[ja,g(a("input",{type:"text",class:"form-control",id:"harga","onUpdate:modelValue":n[7]||(n[7]=s=>t.formLangganan.harga=s)},null,512),[[c,t.formLangganan.harga]])]),Aa],32)])])])],512)],64))}}),Ta=v($a,[["__scopeId","data-v-3c653517"]]);export{Ta as default};
