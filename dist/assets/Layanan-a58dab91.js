import{_ as b,k as h,o as f,c as _,d as e,g as l,B as v,C as y,w as g,e as r,v as c,F as L,a as w,b as u,N as R,H as S,z as C,A as x}from"./index-42287595.js";import{C as I}from"./ChatMe-f254a1a1.js";const i=t=>(C("data-v-094f35d4"),t=t(),x(),t),j={id:"wrapper"},B={id:"content-wrapper",class:"d-flex flex-column"},D={id:"content"},U=i(()=>e("h1",{class:"h3 mb-0 text-gray-800 text-center mt-4"},"Layanan",-1)),A={class:"container"},T=w('<div class="row" data-v-094f35d4><div class="col-sm-6" data-v-094f35d4><button class="btn btn-warning mb-3 mt-5" data-toggle="modal" data-target="#updateLayanan" data-v-094f35d4> Update Layanan </button></div><div class="col-sm-6" data-v-094f35d4><button class="btn btn-primary mb-3 mt-5 float-end" data-toggle="modal" data-target="#updateRekening" data-v-094f35d4> Update Rekening </button></div></div>',1),N={class:"d-flex justify-content-center"},V=["src"],z={class:"modal fade",id:"updateLayanan",tabindex:"-1",role:"dialog","aria-labelledby":"updateLayananLabel","aria-hidden":"true",ref:"updateLayananRef"},F={class:"modal-dialog",role:"document"},M={class:"modal-content"},P=i(()=>e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"addInvoiceModalLabel"},"Update Layanan"),e("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[e("span",{"aria-hidden":"true"},"×")])],-1)),J={class:"modal-body"},K={class:"form-group"},O=i(()=>e("label",{for:"link"},"Judul",-1)),E={class:"form-group"},H=i(()=>e("label",{for:"link"},"Link",-1)),q=i(()=>e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"}," Close "),e("button",{type:"submit",class:"btn btn-primary"},"Simpan")],-1)),W={class:"modal fade",id:"updateRekening",tabindex:"-1",role:"dialog","aria-labelledby":"updateRekeningLabel","aria-hidden":"true",ref:"updateRekeningRef"},G={class:"modal-dialog",role:"document"},Q={class:"modal-content"},X=i(()=>e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"addInvoiceModalLabel"},"Update Rekening"),e("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[e("span",{"aria-hidden":"true"},"×")])],-1)),Y={class:"modal-body"},Z={class:"form-group"},ee=i(()=>e("label",{for:"rekPenerima"},"Rekening Penerima",-1)),te={class:"form-group"},ae=i(()=>e("label",{for:"harga"},"Ketetapan Harga",-1)),oe=i(()=>e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"}," Close "),e("button",{type:"submit",class:"btn btn-primary"},"Simpan")],-1)),ne={data(){return{user_id:null,role:null,ready:null,link:null,formLink:{judul:"",link:""},formRekening:{rekening_penerima:"",harga:""}}},methods:{setLink(){const t=new FormData;t.append("judul",this.formLink.judul),t.append("link",this.formLink.link),u.post("https://backend-webmember.lumirainternational.com/api/auth/set-link",t,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+sessionStorage.getItem("token")}}).then(o=>{console.log(o.data),this.formLink.judul="",this.formLink.link="",this.showAlert()}).catch(o=>{console.error(o)})},setRekening(){const t=new FormData;t.append("rekening_tujuan",this.formRekening.rekening_penerima),t.append("harga",this.formRekening.harga),u.post("https://backend-webmember.lumirainternational.com/api/auth/set-rekening",t,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+sessionStorage.getItem("token")}}).then(o=>{console.log(o.data),this.formRekening.rekening_penerima="",this.formRekening.harga="",this.showAlert()}).catch(o=>{console.error(o)})},async getLink(){try{const t=await u.get("https://backend-webmember.lumirainternational.com/api/auth/get-link",{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}});console.log("link: ",t.data.data[0].link),this.link=t.data.data[0].link}catch(t){console.error(t)}},showAlert(){this.$swal({title:"Request Success",text:"Data Berhasil Dikirim!",icon:"success"}).then(()=>{$("#updateLayanan").modal("hide"),$("#updateRekening").modal("hide")})}},created(){const t=sessionStorage.getItem("token");if(t)try{const[o,d]=t.split("."),m=JSON.parse(atob(o)),n=atob(d),a=JSON.parse(atob(t.split(".")[1])),s=a.exp,p=new Date(s*1e3);console.log("Waktu Kedaluwarsa (UTC):",p.toUTCString()),new Date>p?(console.log("Keluar"),sessionStorage.removeItem("token"),this.$router.push("/")):console.log("Aman");const k=a.level;this.user_id=a.id,console.log("ini idddd:",this.user_id),k!=="1"?this.$router.push("/unauthorized"):(!m||!n)&&this.$router.push("/"),this.getLink()}catch(o){console.error("Error decoding token:",o),this.$router.push("/")}else this.$router.push("/")}},se=Object.assign(ne,{__name:"Layanan",setup(t){const o=h(!1),d=h(""),m=()=>{o.value=!o.value,d.value=o.value?"toggle-sidebar":""};return(n,a)=>(f(),_(L,null,[e("div",j,[l(y,{class:v(d.value)},null,8,["class"]),e("div",B,[e("div",D,[l(R,{onToggleSidebar:m}),l(I),U,e("div",A,[T,e("div",N,[e("iframe",{src:n.link,width:"100%",height:"500px",frameborder:"0",allowfullscreen:""},null,8,V)])])]),l(S)])]),e("div",z,[e("div",F,[e("div",M,[P,e("div",J,[e("form",{onSubmit:a[2]||(a[2]=g(s=>n.setLink(),["prevent"]))},[e("div",K,[O,r(e("input",{type:"text",class:"form-control",id:"judul","onUpdate:modelValue":a[0]||(a[0]=s=>n.formLink.judul=s)},null,512),[[c,n.formLink.judul]])]),e("div",E,[H,r(e("input",{type:"text",class:"form-control",id:"link","onUpdate:modelValue":a[1]||(a[1]=s=>n.formLink.link=s)},null,512),[[c,n.formLink.link]])]),q],32)])])])],512),e("div",W,[e("div",G,[e("div",Q,[X,e("div",Y,[e("form",{onSubmit:a[5]||(a[5]=g(s=>n.setRekening(),["prevent"]))},[e("div",Z,[ee,r(e("input",{type:"text",class:"form-control",id:"rekPenerima","onUpdate:modelValue":a[3]||(a[3]=s=>n.formRekening.rekening_penerima=s)},null,512),[[c,n.formRekening.rekening_penerima]])]),e("div",te,[ae,r(e("input",{type:"text",class:"form-control",id:"harga","onUpdate:modelValue":a[4]||(a[4]=s=>n.formRekening.harga=s)},null,512),[[c,n.formRekening.harga]])]),oe],32)])])])],512)],64))}}),le=b(se,[["__scopeId","data-v-094f35d4"]]);export{le as default};
