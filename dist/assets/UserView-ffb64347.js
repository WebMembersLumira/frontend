import{_ as w,j as b,o as n,c as l,f as p,A as v,B as y,d as e,t as c,n as S,g as x,C,b as f,S as D,N as B,F as T,D as I,E as g,G as A,y as U,z as N}from"./index-add1aecc.js";import{P as k,D as V}from"./jquery.dataTables-1fccfb46.js";const i=s=>(U("data-v-441cd722"),s=s(),N(),s),z={id:"wrapper"},E={id:"content-wrapper",class:"d-flex flex-column"},F={id:"content"},K=i(()=>e("h1",{class:"h3 mb-0 text-gray-800 text-center"},"Halaman User",-1)),O={class:"row"},j=i(()=>e("div",{class:"col-1"},null,-1)),J={class:"col-10"},P=i(()=>e("div",{class:"row mt-5"},[e("div",{class:"col-sm-3"}),e("div",{class:"col-sm-9"})],-1)),W={class:"table-responsive"},G={key:0,class:"preloader"},H=i(()=>e("thead",null,[e("tr",null,[e("th",{scope:"col"},"No"),e("th",{scope:"col"},"Nama"),e("th",{scope:"col"},"Email"),e("th",{scope:"col"},"Status"),e("th",{scope:"col"},"Aksi")])],-1)),L={scope:"row"},Y={key:0,class:"bi bi-hourglass-split text-warning"},q={key:1,class:"bi bi-check-lg text-success"},M={key:2,class:"bi bi-x-lg text-danger"},Q={class:"pe-5"},R={class:"row"},X={class:"col-4"},Z=["href"],ee=i(()=>e("i",{class:"fab fa-whatsapp"},null,-1)),te=[ee],se={class:"col-4"},oe=["onClick"],ae=i(()=>e("i",{class:"bi bi-x-circle"},null,-1)),ne=[ae],le=i(()=>e("div",{class:"col-1"},null,-1));k.use(V);const ie={data(){return{user:[],ready:null}},methods:{async fetchData(){const s=await f.get("https://backend-webmember.lumirainternational.com/api/auth/list-user",{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}});this.user=s.data.data,this.ready=!0},confirmDelete(s){D.fire({title:"Konfirmasi",text:"Apakah Anda yakin ingin menghapus item ini?",icon:"warning",showCancelButton:!0,confirmButtonText:"Ya",cancelButtonText:"Tidak"}).then(t=>{t.isConfirmed&&this.deleteItem(s)})},deleteItem(s){f.delete(`https://backend-webmember.lumirainternational.com/api/auth/delete-user/${s}`,{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}}).then(t=>{console.log(t.data),this.ready=!1,this.showAlert(),this.fetchData()}).catch(t=>{console.error(t)})},showAlert(){this.$swal({title:"Delete Success",text:"Data Berhasil Dihapus!",icon:"success"}).then(()=>{$("#aturTanggal").modal("hide")})}},created(){const s=new Date().toUTCString();console.log("Waktu Sekarang (UTC):",s);const t=sessionStorage.getItem("token");if(t)try{const[r,u]=t.split("."),a=JSON.parse(atob(r)),h=atob(u),o=JSON.parse(atob(t.split(".")[1])),_=o.exp,d=new Date(_*1e3);console.log("Waktu Kedaluwarsa (UTC):",d.toUTCString()),new Date>d?(console.log("Keluar"),sessionStorage.removeItem("token"),this.$router.push("/")):console.log("Aman");const m=o.level;console.log("level:",m),m!=="1"?this.$router.push("/unauthorized"):(!a||!h)&&(this.$router.push("/"),sessionStorage.removeItem("token")),this.fetchData()}catch(r){console.error("Error decoding token:",r),this.$router.push("/")}else this.$router.push("/")}},re=Object.assign(ie,{__name:"UserView",setup(s){const t=b(!1),r=b(""),u=()=>{t.value=!t.value,r.value=t.value?"toggle-sidebar":""};return(a,h)=>(n(),l("div",z,[p(y,{class:v(r.value)},null,8,["class"]),e("div",E,[e("div",F,[p(B,{onToggleSidebar:u}),K,e("div",O,[j,e("div",J,[P,e("div",W,[a.ready?c("",!0):(n(),l("div",G)),a.ready?(n(),S(C(k),{key:1,class:"display table table-striped"},{default:x(()=>[H,e("tbody",null,[(n(!0),l(T,null,I(a.user,(o,_)=>(n(),l("tr",{key:o.id},[e("th",L,g(_+1),1),e("td",null,g(o.name),1),e("td",null,g(o.email),1),e("td",null,[o.status=="0"?(n(),l("i",Y)):c("",!0),o.status=="1"?(n(),l("i",q)):c("",!0),o.status=="2"?(n(),l("i",M)):c("",!0)]),e("td",Q,[e("div",R,[e("div",X,[e("a",{target:"_blank",href:"https://api.whatsapp.com/send?phone=62"+o.no_hp},[e("div",{class:v(["whatsapp-icon",{active:a.showChatBox}]),onClick:h[0]||(h[0]=(...d)=>a.toggleChatBox&&a.toggleChatBox(...d))},te,2)],8,Z)]),e("div",se,[o.role!="admin"?(n(),l("button",{key:0,onClick:d=>a.confirmDelete(o.id),class:"btn btn-danger customDetail"},ne,8,oe)):c("",!0)])])])]))),128))])]),_:1})):c("",!0)])]),le])]),p(A)])]))}}),he=w(re,[["__scopeId","data-v-441cd722"]]);export{he as default};
